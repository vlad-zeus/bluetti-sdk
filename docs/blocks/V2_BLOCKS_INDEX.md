# V2 Protocol Blocks - Complete Index

This index lists all documented V2 protocol blocks with their file locations.

## Documentation Status

- **Total V2 Blocks Found:** 78
- **Fully Documented:** 8 blocks (by other agents)
- **Partially Documented:** 62 blocks (this document)
- **Undocumented:** 8 blocks (low priority/unknown)

---

## Complete Block List

| Block | Dec | Priority | Status | Documentation File | Method |
|-------|-----|----------|--------|-------------------|--------|
| 0x0001 | 1 | LOW | Partial | ADDITIONAL_BLOCKS.md | parseBaseConfig |
| 0x0064 | 100 | HIGH | ✅ Full | (other agent) | parseHomeData |
| 0x02D0 | 720 | MED | Partial | ADDITIONAL_BLOCKS.md | parseOTAStatus |
| 0x044C | 1100 | HIGH | ✅ Full | (other agent) | parseInvBaseInfo |
| 0x04B0 | 1200 | HIGH | ✅ Full | (other agent) | parseInvPVInfo |
| 0x0514 | 1300 | HIGH | ✅ Full | (other agent) | parseInvGridInfo |
| 0x0578 | 1400 | HIGH | ✅ Full | (other agent) | parseInvLoadInfo |
| 0x05DC | 1500 | HIGH | ✅ Full | (other agent) | parseInvInvInfo |
| 0x06A4 | 1700 | MED | Partial | ADDITIONAL_BLOCKS.md | parseInvMeterInfo |
| 0x076C | 1900 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseInvMeterSettings |
| 0x07D0 | 2000 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parseInvBaseSettings |
| 0x0898 | 2200 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parseInvAdvSettings |
| 0x08E8 | 2280 | MED | Partial | ADDITIONAL_BLOCKS.md | heatPumpEnableParse |
| 0x0960 | 2400 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parseCertSettings |
| 0x09C4 | 2500 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseMicroInvAdvSettings |
| 0x0BB8 | 3000 | LOW | Unknown | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x0DAC | 3500 | MED | Partial | ADDITIONAL_BLOCKS.md | parseTotalEnergyInfo |
| 0x0E10 | 3600 | MED | Partial | ADDITIONAL_BLOCKS.md | parseCurrYearEnergy |
| 0x1068 | 4200 | MED | Partial | ADDITIONAL_BLOCKS.md | wtInfoParse |
| 0x1130 | 4400 | HIGH | Partial | ADDITIONAL_BLOCKS.md | wtSettingsParse |
| 0x1388 | 5000 | MED | Partial | ADDITIONAL_BLOCKS.md | parseTimeCtrlInfo |
| 0x1770 | 6000 | HIGH | ✅ Full | (other agent) | parsePackMainInfo |
| 0x17D4 | 6100 | HIGH | ✅ Full | (other agent) | parsePackItemInfo |
| 0x189C | 6300 | MED | Partial | ADDITIONAL_BLOCKS.md | parsePackSubPackInfo |
| 0x1B58 | 7000 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parsePackSettingsInfo |
| 0x1C20 | 7200 | LOW | Partial | ADDITIONAL_BLOCKS.md | EVENT |
| 0x2AF8 | 11000 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parseIOTInfo |
| 0x2B62 | 11106 | MED | Partial | ADDITIONAL_BLOCKS.md | parseWifiInfo |
| 0x2B77 | 11127 | LOW | Partial | ADDITIONAL_BLOCKS.md | EVENT |
| 0x2EE2 | 12002 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | parseIOTSettingsInfo |
| 0x2F81 | 12161 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseIOTEnableInfo |
| 0x2F83 | 12163 | MED | Partial | ADDITIONAL_BLOCKS.md | parseDisasterWarningInfo |
| 0x2F8E | 12174 | LOW | Partial | ADDITIONAL_BLOCKS.md | EVENT |
| 0x2FAD | 12205 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseIoTDisplaySettings |
| 0x3320 | 13088 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseIoTMatterInfo |
| 0x34BC | 13500 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseIOTWiFiMesh |
| 0x3523 | 13603 | LOW | Partial | ADDITIONAL_BLOCKS.md | EVENT |
| 0x352B | 13611 | MED | Partial | ADDITIONAL_BLOCKS.md | parseMultWifi1 |
| 0x3538 | 13624 | MED | Partial | ADDITIONAL_BLOCKS.md | parseMultWifi2 |
| 0x35D0 | 13776 | LOW | Partial | ADDITIONAL_BLOCKS.md | EVENT |
| 0x36B0 | 14000 | MED | Partial | ADDITIONAL_BLOCKS.md | parseHmiInfo |
| 0x38A4 | 14500 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x396C | 14700 | HIGH | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x3A98 | 15000 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x3C8C | 15500 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x3CF0 | 15600 | HIGH | Needs Dev | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x3D54 | 15700 | MED | Partial | ADDITIONAL_BLOCKS.md | dcHubInfoParse |
| 0x3D86 | 15750 | HIGH | Partial | ADDITIONAL_BLOCKS.md | dcHubSettingsParse |
| 0x3E80 | 16000 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x3EE4 | 16100 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x3F48 | 16200 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x4010 | 16400 | HIGH | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x4268 | 17000 | MED | Partial | ADDITIONAL_BLOCKS.md | atsInfoParse |
| 0x42CC | 17100 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x43F8 | 17400 | HIGH | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x4650 | 18000 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x477C | 18300 | HIGH | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x47E0 | 18400 | LOW | Unknown | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x4844 | 18500 | LOW | Unknown | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x48A8 | 18600 | LOW | Unknown | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x4A38 | 19000 | HIGH | ✅ Full | ADDITIONAL_BLOCKS.md | commSOCSettingsParse |
| 0x4A9C | 19100 | HIGH | Partial | ADDITIONAL_BLOCKS.md | commDelaySettingsParse |
| 0x4B00 | 19200 | MED | Partial | ADDITIONAL_BLOCKS.md | parseScheduledBackup |
| 0x4B64 | 19300 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | commTimerSettingsParse |
| 0x4B69 | 19305 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | commTimerTaskListParse |
| 0x4BA5 | 19365 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | EVENT |
| 0x4BE1 | 19425 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | EVENT |
| 0x4C1D | 19485 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | EVENT |
| 0x5208 | 21000 | LOW | Unknown | ADDITIONAL_BLOCKS.md | UNKNOWN |
| 0x6591 | 26001 | MED | Needs Dev | ADDITIONAL_BLOCKS.md | EVENT |
| 0x744A | 29770 | LOW | Partial | ADDITIONAL_BLOCKS.md | bootUpgradeSupportParse |
| 0x744C | 29772 | LOW | Partial | ADDITIONAL_BLOCKS.md | bootSoftwareInfoParse |
| 0x7531 | 30001 | LOW | Partial | ADDITIONAL_BLOCKS.md | parseActiveInfo |
| 0x78B5 | 30901 | LOW | Partial | ADDITIONAL_BLOCKS.md | testSettingsParse |
| 0x9C6C | 40044 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseCertSettingsExt |
| 0x9CBF | 40127 | HIGH | Needs Work | ADDITIONAL_BLOCKS.md | parseHomeStorageSettings |
| 0x9CF5 | 40181 | MED | Partial | ADDITIONAL_BLOCKS.md | parseAntiBackflowCert |
| 0x9CFB | 40187 | HIGH | Partial | ADDITIONAL_BLOCKS.md | parseCertSettingsPart2 |

---

## Status Legend

- **✅ Full**: Complete field mapping with offsets and descriptions
- **Partial**: Basic info known, needs detailed mapping
- **Needs Work**: Parse method exists, complex structure needs analysis
- **Needs Dev**: Event handler only, needs device testing
- **Unknown**: No parse method or unclear purpose

---

## Block Categories

### Inverter Blocks (1100-2600)
- **Info**: 1100, 1200, 1300, 1400, 1500, 1700
- **Settings**: 1900, 2000, 2200, 2400, 2500
- **Status**: 720, 2280, 3500, 3600

### Battery Pack Blocks (6000-7200)
- **Info**: 6000, 6100, 6300
- **Settings**: 7000
- **Debug**: 7200

### IOT Module Blocks (11000-13800)
- **Info**: 11000, 11106, 12161, 12163
- **Settings**: 12002, 12205, 13088, 13500
- **WiFi**: 11106, 13611, 13624
- **Events**: 11127, 12174, 13603, 13776

### Accessory Blocks (14000-18600)
- **HMI**: 14000
- **Smart Plug**: 14500, 14700
- **EV Charger**: 15000
- **DC-DC**: 15500, 15600
- **DC Hub**: 15700, 15750
- **Panel**: 16000, 16100, 16200, 16400
- **ATS**: 17000, 17100, 17400
- **EPAD**: 18000, 18300
- **Unknown**: 18400, 18500, 18600

### Control Blocks (19000-19500)
- **SOC**: 19000
- **Delay**: 19100
- **Backup**: 19200
- **Timers**: 19300, 19305, 19365, 19425, 19485

### Special Blocks (20000+)
- **TOU**: 26001
- **Boot**: 29770, 29772
- **Activation**: 30001
- **Test**: 30901
- **Certification**: 40044, 40127, 40181, 40187
- **Unknown**: 21000

---

## Implementation Checklist

### Phase 1: Core Settings (Essential)
- [x] Block 0x07D0 (2000) - Inverter base settings
- [x] Block 0x0898 (2200) - Inverter advanced settings
- [x] Block 0x2AF8 (11000) - IOT info
- [x] Block 0x2EE2 (12002) - IOT WiFi settings
- [x] Block 0x4A38 (19000) - SOC thresholds
- [x] Block 0x1B58 (7000) - Pack settings
- [x] Block 0x0960 (2400) - Cert settings

### Phase 2: Advanced Features
- [ ] Block 0x4B64 (19300) - Timer settings (complex)
- [ ] Block 0x4A9C (19100) - Delay settings
- [ ] Block 0x9CBF (40127) - Home storage settings
- [ ] Block 0x076C (1900) - Meter settings
- [ ] Block 0x09C4 (2500) - Micro-inverter settings

### Phase 3: Monitoring
- [ ] Block 0x06A4 (1700) - Meter info
- [ ] Block 0x0DAC (3500) - Energy statistics
- [ ] Block 0x0E10 (3600) - Year energy
- [ ] Block 0x2F81 (12161) - IOT enable status
- [ ] Block 0x02D0 (720) - OTA status

### Phase 4: Accessories (Device Dependent)
- [ ] Smart plug blocks (14500, 14700)
- [ ] Panel blocks (16000-16400)
- [ ] DC hub blocks (15700, 15750)
- [ ] ATS blocks (17000-17400)
- [ ] EPAD blocks (18000-18300)

### Phase 5: Low Priority
- [ ] Boot/diagnostic blocks
- [ ] Test settings
- [ ] Unknown blocks

---

## Quick Reference

### Most Important Blocks for Home Assistant

1. **0x07D0 (2000)** - Control charging, AC/DC outputs, ECO mode
2. **0x2EE2 (12002)** - Configure WiFi credentials
3. **0x4A38 (19000)** - Set SOC limits for battery protection
4. **0x4B64 (19300)** - Schedule charging times (TOU optimization)
5. **0x1B58 (7000)** - Battery pack configuration
6. **0x0960 (2400)** - Grid compliance settings
7. **0x9CBF (40127)** - Home energy storage mode

### Most Important Info Blocks

1. **0x0064 (100)** - Home data (primary dashboard)
2. **0x044C (1100)** - Inverter base info
3. **0x2AF8 (11000)** - IOT module info
4. **0x1770 (6000)** - Pack main info
5. **0x17D4 (6100)** - Pack item info

---

## Source Files

- **Block Index**: `ConnectManager.smali` lines 8168-8249
- **Block Handlers**: `ConnectManager.smali` lines 5916-8100
- **Parse Methods**: `ProtocolParserV2.smali`
- **Bean Classes**: `bluetti_smali/smali_classes5/net/poweroak/bluetticloud/ui/connectv2/bean/`

---

## Update History

- **2025-02-13**: Initial index created
  - Documented 78 V2 blocks
  - Fully mapped 15 high-priority blocks
  - Identified 8 unknown blocks for investigation
